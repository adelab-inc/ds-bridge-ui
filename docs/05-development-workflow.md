# 05. 개발 워크플로우

> **대상 독자**: 전체 팀 (PM, 디자이너, FE 개발자, AI 개발자)

## TL;DR (핵심 요약)

- **Contract-First**: API 계약 먼저 정의 → 병렬 개발 가능
- **브랜치 전략**: `feature/fe-*`, `feature/ai-*` 네임스페이스 분리
- **통합 주기**: 주 2회 통합 빌드 검증
- **커뮤니케이션**: 데일리 스탠드업 + 주간 통합 미팅

---

## 개발 단계 개요

```
Phase 1           Phase 2           Phase 3           Phase 4
기반 설정          코어 개발          통합 & 테스트      최적화 & 배포
[Week 1-2]        [Week 3-4]        [Week 5]          [Week 6]
    │                 │                 │                 │
    ▼                 ▼                 ▼                 ▼
┌─────────┐     ┌─────────┐     ┌─────────┐     ┌─────────┐
│ 인프라   │     │ 기능    │     │ 통합    │     │ 최적화  │
│ 셋업    │ ──→ │ 개발    │ ──→ │ 테스트  │ ──→ │ 배포    │
└─────────┘     └─────────┘     └─────────┘     └─────────┘
```

---

## Phase 1: 기반 설정 (Week 1-2)

### 목표
- 개발 환경 구축
- API 계약 합의
- Mock 서버 구현

### 역할별 작업

| 역할 | 작업 | 산출물 |
|------|------|--------|
| **PM** | 요구사항 정리, 일정 수립 | PRD 문서 |
| **디자이너** | 와이어프레임, UI 컴포넌트 정의 | Figma 파일 |
| **FE 개발자** | 모노레포 셋업, Mock 서버 | 프로젝트 초기 구조 |
| **AI 개발자** | API 스펙 정의, 프롬프트 설계 | API 문서 |

### 주요 마일스톤

```
Day 1-2:  [공동] API 계약 정의 (packages/types)
          ├─ 요청/응답 타입 합의
          ├─ 에러 코드 정의
          └─ 스트리밍 포맷 결정

Day 3-5:  [병렬 작업]
          ├─ FE: Turborepo + Next.js 셋업
          ├─ FE: Mock 서버 구현
          └─ AI: 개발 환경 구축

Day 6-10: [병렬 작업]
          ├─ FE: Shadcn/ui + Tailwind 설정
          ├─ FE: 기본 레이아웃 구현
          └─ AI: 기본 프롬프트 테스트
```

### Phase 1 체크리스트

**공동**
- [ ] API 계약 문서 작성 완료
- [ ] 타입 정의 (`packages/types`) 완료
- [ ] 커뮤니케이션 채널 설정 (Slack/Discord)

**FE 개발자**
- [ ] Turborepo + pnpm 초기화
- [ ] Next.js 15 앱 생성
- [ ] Tailwind + Shadcn/ui 설정
- [ ] ESLint + Prettier 설정
- [ ] Mock API 엔드포인트 구현
- [ ] 기본 레이아웃 컴포넌트

**AI 개발자**
- [ ] AI 서버 프로젝트 생성
- [ ] LLM API 연동 테스트
- [ ] 기본 프롬프트 템플릿 작성
- [ ] 스트리밍 응답 구현

**디자이너**
- [ ] 메인 에디터 화면 디자인
- [ ] 컴포넌트 라이브러리 정의
- [ ] 색상/타이포그래피 시스템

---

## Phase 2: 코어 개발 (Week 3-4)

### 목표
- 핵심 기능 구현
- 독립적 개발 진행

### 역할별 작업

**FE 개발자**
| 작업 | 설명 |
|------|------|
| 프롬프트 입력 UI | 사용자 입력 폼 구현 |
| Monaco Editor 통합 | 코드 에디터 삽입 |
| Sandpack 프리뷰 | 실시간 프리뷰 구현 |
| 스트리밍 UI | AI 응답 실시간 표시 |
| 상태 관리 | 에디터 ↔ 프리뷰 동기화 |

**AI 개발자**
| 작업 | 설명 |
|------|------|
| 프롬프트 엔지니어링 | 코드 생성 품질 최적화 |
| 코드 파서 | 생성된 코드 구조화 |
| 에러 핸들링 | 실패 케이스 처리 |
| 성능 최적화 | 응답 속도 개선 |

### 병렬 개발 흐름

```
FE 개발자                              AI 개발자
    │                                     │
    │ ← Mock API 사용 →                   │ ← 실제 LLM 연동 →
    │                                     │
    ▼                                     ▼
┌───────────────┐                 ┌───────────────┐
│  UI 컴포넌트   │                 │  코드 생성    │
│  개발 완료    │                 │  API 완료     │
└───────────────┘                 └───────────────┘
         │                                │
         └──────────┬─────────────────────┘
                    ▼
              [Phase 3: 통합]
```

---

## Phase 3: 통합 & 테스트 (Week 5)

### 목표
- FE ↔ AI 서버 연동
- 통합 테스트
- 버그 수정

### 통합 작업

```
Step 1: 환경 변수 전환
        .env.development → 실제 AI 서버 URL

Step 2: API 연동 테스트
        ├─ 정상 케이스 확인
        ├─ 에러 케이스 확인
        └─ 스트리밍 동작 확인

Step 3: E2E 테스트
        ├─ 사용자 시나리오 테스트
        └─ 성능 측정

Step 4: 버그 수정
        └─ 발견된 이슈 해결
```

### 통합 체크리스트

- [ ] Mock → 실제 API 전환 완료
- [ ] 모든 API 엔드포인트 동작 확인
- [ ] 스트리밍 응답 정상 렌더링
- [ ] 에러 상황 적절한 UI 표시
- [ ] 성능 기준 충족 (응답 시간 < 10초)
- [ ] 크로스 브라우저 테스트 (Chrome, Safari, Firefox)

---

## Phase 4: 최적화 & 배포 (Week 6)

### 목표
- 성능 최적화
- 프로덕션 배포
- 모니터링 설정

### 작업 목록

| 영역 | 작업 |
|------|------|
| **성능** | 코드 스플리팅, 이미지 최적화, 번들 크기 축소 |
| **배포** | Vercel/AWS 배포 파이프라인 구축 |
| **모니터링** | 에러 트래킹, 성능 모니터링 설정 |
| **문서** | 사용자 가이드, API 문서 최종화 |

---

## 브랜치 전략

### 네이밍 규칙

```
main                           # 프로덕션 브랜치
├── develop                    # 개발 통합 브랜치
│   ├── feature/fe-editor      # FE 기능 브랜치
│   ├── feature/fe-preview     # FE 기능 브랜치
│   ├── feature/ai-prompt      # AI 기능 브랜치
│   ├── feature/ai-parser      # AI 기능 브랜치
│   └── fix/fe-streaming-bug   # 버그 수정 브랜치
```

### 브랜치 접두사

| 접두사 | 용도 | 예시 |
|--------|------|------|
| `feature/fe-*` | FE 기능 개발 | `feature/fe-monaco-editor` |
| `feature/ai-*` | AI 기능 개발 | `feature/ai-code-validation` |
| `fix/fe-*` | FE 버그 수정 | `fix/fe-preview-crash` |
| `fix/ai-*` | AI 버그 수정 | `fix/ai-timeout` |
| `docs/*` | 문서 수정 | `docs/api-contract-update` |

### PR 규칙

**일반 PR**
- 같은 팀원 1명 이상 리뷰
- CI 통과 필수

**`packages/types` 수정 PR**
- FE 개발자 + AI 개발자 **모두** 리뷰 필수
- 양 팀 approve 후 머지

---

## 커뮤니케이션

### 정기 미팅

| 미팅 | 주기 | 참석자 | 목적 |
|------|------|--------|------|
| 데일리 스탠드업 | 매일 | 전체 | 진행 상황 공유, 블로커 논의 |
| 주간 통합 미팅 | 주 1회 | FE + AI | 통합 이슈 논의, API 변경 협의 |
| 스프린트 리뷰 | 격주 | 전체 + 이해관계자 | 데모, 피드백 수집 |

### 비동기 커뮤니케이션

| 채널 | 용도 |
|------|------|
| `#ds-bridge-general` | 일반 논의 |
| `#ds-bridge-fe` | FE 관련 논의 |
| `#ds-bridge-ai` | AI 관련 논의 |
| `#ds-bridge-integration` | 통합 이슈 논의 |
| GitHub Issues | 버그 리포트, 기능 요청 |
| GitHub PR | 코드 리뷰 |

### 에스컬레이션 경로

```
문제 발생
    │
    ├─ 기술적 문제 → Slack 채널 논의 → 미해결 시 → 주간 미팅 안건
    │
    ├─ 일정 지연 → PM에게 즉시 공유 → 조정 논의
    │
    └─ API 변경 필요 → #ds-bridge-integration → 양 팀 합의 → PR
```

---

## 품질 게이트

### 코드 품질

| 항목 | 기준 | 도구 |
|------|------|------|
| 린트 통과 | 에러 0개 | ESLint |
| 타입 체크 | 에러 0개 | TypeScript |
| 테스트 통과 | 100% | Jest/Vitest |
| 코드 리뷰 | 1명 이상 approve | GitHub PR |

### 자동화된 체크 (CI)

```yaml
# 모든 PR에 자동 실행
- lint: pnpm lint
- typecheck: pnpm typecheck
- test: pnpm test
- build: pnpm build
```

### 배포 전 체크리스트

- [ ] 모든 테스트 통과
- [ ] 스테이징 환경 QA 완료
- [ ] 성능 기준 충족
- [ ] PM 배포 승인

---

## 리스크 관리

### 예상 리스크

| 리스크 | 영향 | 대응 방안 |
|--------|------|----------|
| API 계약 변경 빈번 | 양 팀 재작업 | Phase 1에서 충분한 논의 |
| AI 응답 품질 불안정 | 사용자 경험 저하 | 폴백 메시지, 재시도 로직 |
| 통합 시 예상치 못한 버그 | 일정 지연 | 주 2회 통합 테스트로 조기 발견 |
| 성능 이슈 | 사용자 이탈 | 성능 예산 설정, 모니터링 |

### 의존성 관리

```
FE가 AI에 의존하는 부분:
├─ 코드 생성 API (Mock으로 대체 가능 ✅)
├─ 에러 응답 형식 (타입 정의로 합의 ✅)
└─ 스트리밍 프로토콜 (사전 합의 ✅)

AI가 FE에 의존하는 부분:
├─ 요청 형식 (타입 정의로 합의 ✅)
└─ 없음 (독립적 개발 가능)
```

---

## 다음 문서

- [06. 디렉토리 구조](./06-directory-structure.md) - 코드베이스 상세 구조
- [04. API 계약](./04-api-contract.md) - API 인터페이스 상세
